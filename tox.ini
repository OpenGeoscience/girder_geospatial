[tox]
envlist = py27, py35, py36, lint

[testenv]
deps =
    -rrequirements-dev.txt
    -e types/raster
    -e types/vector
    -e types/grid
commands =
    girder-install plugin . -s
    pytest -vv {posargs} -n auto

[testenv:coverage]
passenv = CODECOV_TOKEN
basepython = python3.6
commands =
    girder-install plugin . -s
    py.test --cov-config .coveragerc --cov-report term-missing --cov=geometa --cov=types --cov=server -n auto
    codecov

[testenv:lint]
skipinstall = true
skipsdist = true
deps = flake8
basepython = python3.6
commands = flake8
